<!DOCTYPE html>
<html lang="en" typeof="bibo:Document " about="" property="dcterms:language" content="en">
<head>
    <meta charset="utf-8">
    <script type="text/javascript" src="intentions-polyfill.js"></script>
    <script type="text/javascript">
        function setup(){
            var editArea = document.getElementById("editArea");
            editArea.addEventListener("beforeSelectionChange", logIntentionEvent);
            editArea.addEventListener("beforeInput", logIntentionEvent);
            //editArea.addEventListener("focus", function(){editArea.innerHTML = "<br>";});
        }
        function logIntentionEvent(evt){
            document.getElementById("log").textContent += "event : { type : \"" + evt.type + "\", intention : \"" + evt.intention + "\"}\n";
            document.getElementById("log").scrollTop = 99999;
        }
    </script>
</head>
<body onload="setup()"> 
    <div contentEditable="true" id="editArea" title="type here">
        <div>f<div>o<ul><li>one</li><li style="color:blue">two</li></ul>o</div></div><span>bar</span>baz
    </div>
    <div>Currently supports typing letters numers and some symbols. Also supports moving caret and selection with arrow keys, select all with control+a, and some formatting like control+b.</div>
    <div>Log:</div>
    <textarea readonly id="log" style="width:600px;height:400px"></textarea>
</body></html>
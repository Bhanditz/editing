<!DOCTYPE html>
<html lang='en'>
  <head>
    <meta charset='utf-8'>
    <title>Input Events</title>
    <script src='http://www.w3.org/Tools/respec/respec-w3c-common' async class='remove'></script>
    <script class='remove'>
      var respecConfig = {
              specStatus:   "unofficial"
          ,   shortName:    "input-events"
          ,   editors:      [{ name: "Ben Peters", 
                               mailto: "BenjamP@microsoft.com",
                               company: "Microsoft", 
                               companyURL: "http://www.microsoft.com" }]
          ,   wg:           "Web Applications Working Group"
          ,   wgURI:        "http://www.w3.org/2008/webapps/"
          ,   wgPublicList: "public-webapps"
          ,   wgPatentURI:  "http://www.w3.org/2004/01/pp-impl/40318/status"
          ,   edDraftURI:   "http://w3c.github.io/editing-explainer/input-events.html"
          ,   license:      "cc-by"
        };
    </script>
  </head>
  <body>
    <section id='abstract'>
      <p>
       This specification defines events for text and related input and provides relavant contextual information for each event. 
       This specification builds on the Document Object Model Events Level 3.
      </p>
    </section>
    <section id='sotd'>
      <p>
      </p>
    </section>
    <section>
      <h2>Introduction</h2>
      <p>
        This documen describes 2 events- Input (which already exists and is being extended) and beforeInput (which is newly defined here). 
        The goal of these events is to allow authors to understand and/or override default input behavior both before and after input occurs.
      </p>
    </section>
    <section>
      <h2>Problem and Use Cases</h2>
        The problems solved by and use cases for this document by this document are tracked in the <a href="http://w3c.github.io/editing-explainer/">Editing Explainer</a> document.
    </section>
    <section>
    <h2>beforeInput</h2>
    <p>WILL SOON BE UPDATED to proper formatting</p>
    <p>beforeInput shall be fired before any text or related input is inserted into the document. 
    The user agent shall set the values of the following properties on this event:<br>
    intention: the type of input. Allowed values include insertText, insertNewline, delete, undo, redo.<br>
    data: contains data specific to the Intention.<br>
    targetRange: the Range in the document that will be affected by this event.<br>
    </section>
    <section>
    <h2>Default action for beforeInput</h2>
    <p>The default action of a given beforeinput event dependson the value of the intention property on the event. All of this can be prevented with preventDefault(). 
    For all beforeInput events, if the location of targetRange is not Editable, abort these steps.
    <p>
    <p>The default action of a beforeInput event with intention="insertText" shall be as follows:
    <ol><li>If targetRange is not collapsed, abort these steps
    </li><li>If data is not a string, abort these steps
    </li><li>Insert data at the location of targetRange in the document
    </li></ol>
    </p><p>The default action of a beforeInput event with intention="insertNewline" shall be as follows:
    <ol><li>If targetRange is not collapsed, abort these steps
    </li><li>If data is not a known paragraph separator ("div", "p", or "br"), abort these steps.
    </li><li>NEED ALGORITHM to split nodes
    </li><li>Wrap the beforeNode and afterNode in the tag given by data
    </li><li>NEED ALGORITHM to simplify nodes for both beforeNode and afterNode
    </li></ol>
    </p><p>The default action of a beforeInput event with intention="delete" shall be as follows:
    <ol><li>NEED ALGORITHM to split nodes
    </li><li>Remove the contents of targetRange from the document
    </li><li>NEED ALGORITHM to merge nodes
    </li></ol>
    </p><p>The default action of a beforeInput event with intention="format" is unspecified
    </p><p>The default action of a beforeInput event with intention="undo" or "redo" shall be as follows. 
    Note that this may not be completely interoperable in the size of the undo unit.
    However, browsers must reset to a state that previously existed in the document, and X undo operations
    followed by X redo operations must return to the original state, and vice versa. 
    <ol><li>Undo or redo as appropriate based on the browser's undo stack.
    </li></ol>
    </p>
    </section>
    <section>
      <h2>Acknowledgements</h2>
    </section>
  </body>
</html>
